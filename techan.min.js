/*
 TechanJS v0.1.0
 (c) 2014 - 2014 Andre Dumas | https://github.com/andredumas/techan.js
*/
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.techan=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";b.exports="0.1.0"},{}],2:[function(a,b){"use strict";b.exports=function(){return{ohlc:a("./ohlc"),volume:a("./volume"),macd:a("./macd"),rsi:a("./rsi"),value:a("./value")}}},{"./macd":3,"./ohlc":4,"./rsi":5,"./value":6,"./volume":7}],3:[function(a,b){"use strict";b.exports=function(){function a(b){return a.m(b)}function b(){return a.d=c,a.m=d,a.s=f,a.dif=g,a.z=e,a}var c=function(a){return a.date},d=function(a){return a.macd},e=function(a){return a.zero},f=function(a){return a.signal},g=function(a){return a.difference};return a.date=function(a){return arguments.length?(c=a,b()):c},a.macd=function(a){return arguments.length?(d=a,b()):d},a.signal=function(a){return arguments.length?(f=a,b()):f},a.difference=function(a){return arguments.length?(g=a,b()):g},b()}},{}],4:[function(a,b){"use strict";b.exports=function(){function a(b){return a.c(b)}function b(){return a.d=c,a.o=d,a.h=e,a.l=f,a.c=g,a.v=h,a}var c=function(a){return a.date},d=function(a){return a.open},e=function(a){return a.high},f=function(a){return a.low},g=function(a){return a.close},h=function(a){return a.volume};return a.date=function(a){return arguments.length?(c=a,b()):c},a.open=function(a){return arguments.length?(d=a,b()):d},a.high=function(a){return arguments.length?(e=a,b()):e},a.low=function(a){return arguments.length?(f=a,b()):f},a.close=function(a){return arguments.length?(g=a,b()):g},a.volume=function(a){return arguments.length?(h=a,b()):h},b()}},{}],5:[function(a,b){"use strict";b.exports=function(){function a(b){return a.r(b)}function b(){return a.d=c,a.r=d,a.ob=e,a.os=f,a.m=g,a}var c=function(a){return a.date},d=function(a){return a.rsi},e=function(a){return a.overbought},f=function(a){return a.oversold},g=function(a){return a.middle};return a.date=function(a){return arguments.length?(c=a,b()):c},a.rsi=function(a){return arguments.length?(d=a,b()):d},a.overbought=function(a){return arguments.length?(e=a,b()):e},a.oversold=function(a){return arguments.length?(f=a,b()):f},a.middle=function(a){return arguments.length?(g=a,b()):g},b()}},{}],6:[function(a,b){"use strict";b.exports=function(){function a(b){return a.v(b)}function b(){return a.d=c,a.v=d,a.z=e,a}var c=function(a){return a.date},d=function(a){return a.value},e=function(a){return a.zero};return a.date=function(a){return arguments.length?(c=a,b()):c},a.value=function(a){return arguments.length?(d=a,b()):d},a.zero=function(a){return arguments.length?(e=a,b()):e},b()}},{}],7:[function(a,b){"use strict";b.exports=function(){function a(b){return a.v(b)}function b(){return a.d=c,a.v=d,a}var c=function(a){return a.date},d=function(a){return a.volume};return a.date=function(a){return arguments.length?(c=a,b()):c},a.volume=function(a){return arguments.length?(d=a,b()):d},b()}},{}],8:[function(a,b){"use strict";b.exports=function(){return{}}},{}],9:[function(a,b){"use strict";b.exports=function(a,b){return function(){function c(a){return c.init(),a.map(d).filter(function(a){return a.value})}function d(a,b){var d=c.average(i.accessor(a));return j>b+1&&(d=null),{date:i.accessor.d(a),value:d}}var e,f,g,h,i={},j=10;return c.init=function(){return e=null,f=2/(j+1),g=0,h=0,c},c.average=function(a){return j>h?(g+=a)/++h:(h===j&&(e=g/h++),e+=f*(a-e))},c.period=function(a){return arguments.length?(j=a,c):j},a(c,i,b()),c}}},{}],10:[function(a,b){"use strict";b.exports=function(){var b=a("./indicatormixin")(),c=a("../accessor")(),d=a("./ema")(b,c.ohlc);return{ema:d,macd:a("./macd")(b,c.ohlc,d),rsi:a("./rsi")(b,c.ohlc,d),sma:a("./sma")(b,c.ohlc)}}},{"../accessor":2,"./ema":9,"./indicatormixin":11,"./macd":12,"./rsi":13,"./sma":14}],11:[function(a,b){"use strict";b.exports=function(){function a(a,b,c){function d(){return b.accessor=c,a}a.accessor=function(a){return arguments.length?(c=a,d()):c},d()}return a}},{}],12:[function(a,b){"use strict";function c(a,b,c,d,e){return b?{date:a,macd:b,signal:c,difference:d,zero:e}:{date:a,macd:null,signal:null,difference:null,zero:null}}b.exports=function(a,b,d){return function(){function e(a){var b=Math.max(g,h)-1,j=b+i-1,k=d().accessor(e.accessor()).period(i).init(),l=d().accessor(e.accessor()).period(g).init(),m=d().accessor(e.accessor()).period(h).init();return a.map(function(a,d){h=l.average(f.accessor(a)),g=m.average(f.accessor(a));var e=h-g,i=d>=b?k.average(e):null;return d>=j?c(f.accessor.d(a),e,i,e-i,0):c(f.accessor.d(a))}).filter(function(a){return a.macd})}var f={},g=12,h=26,i=9;return e.fast=function(a){return arguments.length?(g=a,e):g},e.slow=function(a){return arguments.length?(h=a,e):h},e.signal=function(a){return arguments.length?(i=a,e):i},a(e,f,b()),e}}},{}],13:[function(a,b){"use strict";function c(a,b,c,d,e){return b?{date:a,rsi:b,middle:c,overbought:d,oversold:e}:{date:a,rsi:null,middle:null,overbought:null,oversold:null}}b.exports=function(a,b,d){return function(){function e(a){var b=d().accessor(e.accessor()).period(g).init(),k=d().accessor(e.accessor()).period(g).init();return a.map(function(d,e){if(1>e)return c(f.accessor.d(d));var l=f.accessor(d)-f.accessor(a[e-1]),m=k.average(Math.max(l,0)),n=Math.abs(b.average(Math.min(l,0)));if(e>=g){var o=100-100/(1+m/n);return c(f.accessor.d(d),o,i,h,j)}return c(f.accessor.d(d))}).filter(function(a){return a.rsi})}var f={},g=14,h=70,i=50,j=30;return e.period=function(a){return arguments.length?(g=a,e):g},e.overbought=function(a){return arguments.length?(h=a,e):h},e.middle=function(a){return arguments.length?(i=a,e):i},e.oversold=function(a){return arguments.length?(j=a,e):j},a(e,f,b()),e}}},{}],14:[function(a,b){"use strict";b.exports=function(a,b){return function(){function c(a){return c.init(),a.map(d).filter(function(a){return a.value})}function d(a,b){var d=c.average(h.accessor(a));return i>b+1&&(d=null),{date:h.accessor.d(a),value:d}}var e,f,g,h={},i=10;return c.init=function(){return g=0,e=[],f=0,c},c.average=function(a){return g+=a,e.length+1<i?(e.push(a),g/++f):(e.length<i&&(e.push(a),g+=a),g-=e[f],e[f]=a,++f===i&&(f=0),g/i)},c.period=function(a){return arguments.length?(i=a,c):i},a(c,h,b()),c}}},{}],15:[function(a,b){"use strict";function c(a,b,c,f){a.selectAll("path.candle.body").attr({d:d(b,c,f)}),a.selectAll("path.candle.wick").attr({d:e(b,c,f)})}function d(a,b,c){return function(d){var e=[],f=c(a.o(d)),g=c(a.c(d)),h=b.band(),i=b(a.d(d))-h/2;return e.push("M",i,f),e.push("l",h,0),f!=g&&(e.push("L",i+h,g),e.push("l",-h,0),e.push("L",i,f)),e.join(" ")}}function e(a,b,c){return function(d){var e=[],f=c(a.o(d)),g=c(a.c(d)),h=b.band(),i=b(a.d(d)),j=i-h/2;return e.push("M",i,c(a.h(d))),e.push("L",i,Math.min(f,g)),f==g&&(e.push("M",j,f),e.push("l",h,0)),e.push("M",i,Math.max(f,g)),e.push("L",i,c(a.l(d))),e.join(" ")}}b.exports=function(a,b,d,e,f){return function(){function g(c){var d=e.groupSelect(c,e.dataMapper.unity,h.accessor.d);if(d.entry.append("path").attr({"class":"candle body"}).classed(e.classedUpDown(h.accessor)),d.entry.append("path").attr({"class":"candle wick"}).classed(e.classedUpDown(h.accessor)),i){var f=a().domain(b(d.selection.data().map(h.accessor.v).filter(isNaN))).range([.2,1]);d.selection.selectAll("path").style("opacity",function(a){var b=h.accessor.v(a);return isNaN(b)?null:f(b)})}g.refresh(c)}var h={},i=!1;return g.refresh=function(a){c(a,h.accessor,h.xScale,h.yScale)},g.volumeOpacity=function(a){return arguments.length?(i=a,g):i},f(g,h,d()),g}}},{}],16:[function(a,b){"use strict";b.exports=function(b){var c=a("../scale")(b),d=a("../accessor")(),e=a("./plot")(b),f=a("./plotmixin")(b.scale.linear,c.financetime),g=a("./line");return{candlestick:a("./candlestick")(b.scale.linear,b.extent,d.ohlc,e,f),ema:g(d.value,e,f),ohlc:a("./ohlc")(b.scale.linear,b.extent,d.ohlc,e,f),close:g(d.ohlc,e,f),volume:a("./volume")(d.volume,e,f),rsi:a("./rsi")(d.rsi,e,f),macd:a("./macd")(d.macd,e,f),momentum:g(d.value,e,f,!0),moneyflow:g(d.value,e,f,!0),sma:g(d.value,e,f)}}},{"../accessor":2,"../scale":25,"./candlestick":15,"./line":17,"./macd":18,"./ohlc":19,"./plot":20,"./plotmixin":21,"./rsi":22,"./volume":23}],17:[function(a,b){"use strict";function c(a,b,c,d,e,f){a.selectAll("path.line").attr({d:e.pathLine(b.d,c,b,d)}),f&&a.selectAll("path.zero").attr({d:e.horizontalPathLine(c,b.z,d)})}b.exports=function(a,b,d,e){function f(){function f(a){var c=b.groupSelect(a,b.dataMapper.array,g.accessor.date());c.entry.append("path").attr({"class":"line"}),e&&c.selection.append("path").attr({"class":"zero"}),f.refresh(a)}var g={};return f.refresh=function(a){c(a,g.accessor,g.xScale,g.yScale,b,e)},d(f,g,a()),f}return e=e||!1,f}},{}],18:[function(a,b){"use strict";function c(a,b,c,e,f){a.selectAll("path.difference").attr({d:d(b,c,e)}),a.selectAll("path.zero").attr({d:f.horizontalPathLine(b.d,c,b.z,e)}),a.selectAll("path.macd").attr({d:f.pathLine(b.d,c,b.m,e)}),a.selectAll("path.signal").attr({d:f.pathLine(b.d,c,b.s,e)})}function d(a,b,c){return function(d){var e=[],f=c(0),g=c(a.dif(d))-f,h=b.band(),i=b(a.d(d))-h/2;return e.push("M",i,f),e.push("l",0,g),e.push("l",h,0),e.push("l",0,-g),e.join(" ")}}b.exports=function(a,b,d){function e(){function e(a){var c=b.groupSelect(a,b.dataMapper.array,f.accessor.d),d=c.selection.append("g").attr({"class":"difference"}).selectAll("g.difference").data(function(a){return a});d.exit().remove(),d.enter().append("path").attr({"class":"difference"}),c.selection.append("path").attr({"class":"zero"}),c.selection.append("path").attr({"class":"macd"}),c.selection.append("path").attr({"class":"signal"}),e.refresh(a)}var f={};return e.refresh=function(a){c(a,f.accessor,f.xScale,f.yScale,b)},d(e,f,a()),e}return e}},{}],19:[function(a,b){"use strict";function c(a,b,c,e){a.selectAll("path.ohlc").attr({d:d(b,c,e)})}function d(a,b,c){return function(d){var e=[],f=c(a.o(d)),g=c(a.c(d)),h=b.band(),i=b(a.d(d)),j=i-h/2;return e.push("M",j,f),e.push("l",h/2,0),e.push("M",i,c(a.h(d))),e.push("L",i,c(a.l(d))),e.push("M",i,g),e.push("l",h/2,0),e.join(" ")}}b.exports=function(a,b,d,e,f){return function(){function a(c){e.groupSelect(c,e.dataMapper.unity,b.accessor.d).entry.append("path").attr({"class":"ohlc"}).classed(e.classedUpDown(b.accessor)),a.refresh(c)}var b={};return a.refresh=function(a){c(a,b.accessor,b.xScale,b.yScale)},f(a,b,d()),a}}},{}],20:[function(a,b){"use strict";b.exports=function(a){function b(a,b,c){var d=a.selectAll("g.data").data(b,c);return d.exit().remove(),d}function c(a){return a.enter().append("g").attr({"class":"data"})}return{dataMapper:{unity:function(a){return a},array:function(a){return[a]}},dataSelection:b,dataEntry:c,groupSelect:function(a,d,e){var f=b(a,d,e),g=c(f);return{selection:f,entry:g}},classedUpDown:function(a){return{up:function(b){return a.o(b)<a.c(b)},down:function(b){return a.o(b)>a.c(b)}}},horizontalPathLine:function(a,b,c,d){return function(e){var f=[],g=e[0],h=e[e.length-1];return f.push("M",b(a(g)),d(c(g))),f.push("L",b(a(h)),d(c(h))),f.join(" ")}},pathLine:function(b,c,d,e){return a.svg.line().interpolate("monotone").x(function(a){return c(b(a))}).y(function(a){return e(d(a))})}}}},{}],21:[function(a,b){"use strict";b.exports=function(a,b){function c(c,d,e){function f(){return d.xScale=g,d.yScale=h,d.accessor=e,c}var g=b(),h=a();c.accessor=function(a){return arguments.length?(e=a,f()):e},c.xScale=function(a){return arguments.length?(g=a,f()):g},c.yScale=function(a){return arguments.length?(h=a,f()):h},f()}return c}},{}],22:[function(a,b){"use strict";function c(a,b,c,d,e){a.selectAll("path.overbought").attr({d:e.horizontalPathLine(b.d,c,b.ob,d)}),a.selectAll("path.middle").attr({d:e.horizontalPathLine(b.d,c,b.m,d)}),a.selectAll("path.oversold").attr({d:e.horizontalPathLine(b.d,c,b.os,d)}),a.selectAll("path.rsi").attr({d:e.pathLine(b.d,c,b.r,d)})}b.exports=function(a,b,d){function e(){function e(a){var c=b.groupSelect(a,b.dataMapper.array,f.accessor.d);c.entry.append("path").attr({"class":"overbought"}),c.entry.append("path").attr({"class":"middle"}),c.entry.append("path").attr({"class":"oversold"}),c.entry.append("path").attr({"class":"rsi"}),e.refresh(a)}var f={};return e.refresh=function(a){c(a,f.accessor,f.xScale,f.yScale,b)},d(e,f,a()),e}return e}},{}],23:[function(a,b){"use strict";function c(a,b,c,e){a.selectAll("path.volume").attr({d:d(b,c,e)})}function d(a,b,c){return function(d){var e=a.v(d);if(isNaN(e))return null;var f=[],g=c(0),h=c(e)-g,i=b.band(),j=b(a.d(d))-i/2;return f.push("M",j,g),f.push("l",0,h),f.push("l",i,0),f.push("l",0,-h),f.join(" ")}}b.exports=function(a,b,d){function e(){function e(a){var c=b.groupSelect(a,b.dataMapper.unity,f.accessor.d).entry.append("path").attr({"class":"volume"});f.accessor.o&&f.accessor.c&&c.classed(b.classedUpDown(f.accessor)),e.refresh(a)}var f={};return e.refresh=function(a){c(a,f.accessor,f.xScale,f.yScale)},d(e,f,a()),e}return e}},{}],24:[function(a,b){"use strict";b.exports=function(a,b,c,d,e,f){function g(b,c){function m(a){return b(q[+a])}function n(){return s=h(b,c),m}function o(){q=j(c)}var q,r={tickFormat:p[p.length-1][2]},s=3;return b=b||a(),c=c||[new Date(0),new Date(1)],m.invert=function(a){var b=m.invertToIndex(a);return null===b?null:c[b]},m.invertToIndex=function(a){var d=Math.round(b.invert(a));return c[d]?Math.abs(d):null},m.domain=function(a){if(!arguments.length){var d=b.domain();return d=[Math.ceil(d[0]),Math.floor(d[d.length-1])],c.slice(d[0],d[d.length-1]+1)}return c=a,o(),b.domain([0,c.length-1]),n(),b.domain(b.range().map(e(.65,s)).map(b.invert)),n()},m.copy=function(){return g(b.copy(),c)},m.band=function(){return s},m.zoomable=function(){return f(b,n)},m.ticks=function(a,b){var c=m.domain();if(!c.length)return[];var d=void 0===a?i(c,10):"number"==typeof a?i(c,a):null;r.tickFormat=d?d[2]:i(c,10)[2],d&&(a=d[0],b=d[1]);var e=a.range(c[0],+c[c.length-1]+1,b);return e.map(k(c)).reduce(l,[])},m.tickFormat=function(){return function(a){return r.tickFormat(a)}},d(m,b,n,"range","interpolate","clamp","nice"),o(),n()}function h(a,b){return Math.abs(a(b.length-1)-a(0))/Math.max(1,b.length-1)*.8}function i(a,b){var d=p,e=o,f=(a[a.length-1]-a[0])/b,g=c(e,f);return g?d[f/e[g-1]<e[g]/f?g-1:g]:d[g]}function j(a){var b={};return a.forEach(function(a,c){b[+a]=c}),b}function k(a){var b=j(a);return function(d){var e=b[+d];return void 0!==e?a[e]:a[c(a,d)]}}function l(a,b){return(0===a.length||a[a.length-1]!==b)&&a.push(b),a}{var m=b.format("%b %e"),n=b.format.multi([["%b %Y",function(a){return a.getMonth()}],["%Y",function(){return!0}]]),o=[864e5,6048e5,2592e6,7776e6,31536e6],p=[[b.day,1,m],[b.monday,1,m],[b.month,1,n],[b.month,3,n],[b.year,1,n]];[[b.hour,1],[b.hour,3],[b.hour,6],[b.hour,12],[b.day,1]]}return g}},{}],25:[function(a,b){"use strict";function c(a,b,c,d){return b.length>0?a.extent(b,c).map(e(d)):null}function d(a,b,d,e){return a.scale.linear().domain(c(a,b,d,e)).range([1,0])}function e(a,b){return a=a||0,function(c,d,e){if(e.length>2)throw"array.length > 2 unsupported. array.length = "+e.length;return b=b||e[e.length-1]-e[0],c+(2*d-1)*b*a}}b.exports=function(b){var c=a("./zoomable")(),f=a("../util")(),g=a("../accessor")(),h=a("./financetime")(b.scale.linear,b.time,b.bisect,f.rebindCallback,e,c);return{financetime:h,analysis:{supstance:function(){return b.scale.linear()},trendline:function(){return b.scale.linear()}},plot:{time:function(a,b){return b=b||g.value(),h().domain(a.map(b.d))},percent:function(a,b){var c=a.domain();return b=b||c[0],a.copy().domain([c[0],c[c.length-1]].map(function(a){return(a-b)/b}))},ohlc:function(a,c){return c=c||g.ohlc(),b.scale.linear().domain([b.min(a.map(c.low())),b.max(a.map(c.high()))].map(e(.02))).range([1,0])},volume:function(a,c){return c=c||g.ohlc().v,b.scale.linear().domain([0,1.15*b.max(a.map(c))]).range([1,0])},rsi:function(){return b.scale.linear().domain([0,100]).range([1,0])},momentum:function(a,c){return c=c||g.value(),d(b,a,c,.04)},moneyflow:function(a,c){return c=c||g.value(),d(b,a,c,.04)},macd:function(a,c){return c=c||g.macd(),d(b,a,c,.04)},movingaverage:function(a,c){return c=c||g.value(),d(b,a,c)}},position:{}}}},{"../accessor":2,"../util":28,"./financetime":24,"./zoomable":26}],26:[function(a,b){"use strict";b.exports=function(){function a(b,c){var d={},e=b.domain();return d.invert=b.invert,d.domain=function(a){if(!arguments.length)throw"zoomable is a write only domain. Use this scale for zooming only";return b.domain([Math.max(e[0],a[0]),Math.min(e[1],a[1])]),c&&c(),d},d.range=function(){if(!arguments.length)return b.range();throw"zoomable is a read only range. Use this scale for zooming only"},d.copy=function(){return a(b.copy(),c)},d}return a}},{}],27:[function(a,b){"use strict";b.exports=function(b){return{version:a("../build/version"),accessor:a("./accessor")(),analysis:a("./analysis")(b),indicator:a("./indicator")(),plot:a("./plot")(b),scale:a("./scale")(b)}}(d3)},{"../build/version":1,"./accessor":2,"./analysis":8,"./indicator":10,"./plot":16,"./scale":25}],28:[function(a,b){"use strict";function c(a,b,c){for(var e,f=2,g=arguments.length;++f<g;)a[e=arguments[f]]=d(a,b,b[e],c);return a}function d(a,b,c,d){return function(){var e=c.apply(b,arguments);return d&&e===b&&d(),e===b?a:e}}b.exports=function(){return{rebindCallback:c,rebind:function(){var a=Array.prototype.slice.call(arguments,0);return a.splice(2,0,void 0),c.apply(this,a)}}}},{}]},{},[27])(27)});
//# sourceMappingURL=techan.min.js.map